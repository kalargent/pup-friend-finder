<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <title>Doggo Fren Finder</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <script src="https://kit.fontawesome.com/b7ff529076.js"></script>
    <link rel="stylesheet" type= "text/css" href="../css/style.css">
  </head>

  <body>

    <!-- HEADER CONTAINER -->
    <div class = "container">
      <p></p>
      <h1 class="surveyHeader">Doggo Survey Questions</h1>
      <hr />
    </div>

    <!-- CONTAINER FOR TEXT ENTRY  -->
    <div class="container">
      <h2>Tell us about urself!</h2>
      <form class="theForm" id="form1">
        <div class="form-group info" id = "info">
          <label for="formGroupExampleInput">Ur Naim</label>
          <input
            type="text"
            class="form-control"
            id="name"
            placeholder="Add ur doggos name"
          />
        </div>
        <div class="form-group info">
          <label for="formGroupExampleInput2">Ur Photo </label>
          <input
            type="text"
            class="form-control"
            id="pic"
            placeholder="Add a link 2 a photo of ur doggo"
          />
        </div>
      </form>
    </div>

    <hr />

    <!-- QUESTION CONTAINER -->
    <!-- each question has six options the first of which is blank. each numeric option has a value assigned. this allows me to calculate the -->
    <!-- total score but still allows text for guidance in the form -->
    <div class="container">
      <form class="theForm" id="form2">
        <div class="form-group info" id ="questions">
          <label for="question1"> <i class="fas fa-question-circle"></i> U're always thinkin of when 2 taik the next nap.</label
          >
          <select class="form-control" id="answer1">
              <option> Pikk an answer </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question2"> <i class="fas fa-question-circle"></i> The mailman iz prety amazin.</label>
          <select class="form-control" id="answer2">
              <option> Pikk an answer </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question3"><i class="fas fa-question-circle"></i> U wag a lot when the hoomans come home.</label>
          <select class="form-control" id="answer3">
              <option> Pikk an answer </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question4"><i class="fas fa-question-circle"></i> U're the boss of the hoomans.</label>
          <select class="form-control" id="answer4">
              <option> Pikk an answer </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question5"><i class="fas fa-question-circle"></i> Doggos rule and katters drool.</label>
          <select class="form-control" id="answer5">
              <option> Pikk an answer </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question6"><i class="fas fa-question-circle"></i> The best way 2 greet a new fren iz by snifin.</label>
          <select class="form-control" id="answer6">
              <option>Pikk an answer  </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question7"><i class="fas fa-question-circle"></i> U know how 2 get treats from the hoomans.</label>
          <select class="form-control" id="answer7">
              <option> Pikk an answer </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question8"> <i class="fas fa-question-circle"></i> U liek hekkin long walks in the park.</label>
          <select class="form-control" id="answer8">
              <option>Pikk an answer  </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question9"><i class="fas fa-question-circle"></i> Chimkin iz beter than cheeze.</label>
          <select class="form-control" id="answer9">
              <option>Pikk an answer  </option>
              <option value = "1">1 (hekk no!)</option>
              <option value = "2">2</option>
              <option value = "3">3</option>
              <option value = "4">4</option>
              <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>

        <div class="form-group info">
          <label for="question10"><i class="fas fa-question-circle"></i> Goin 2 the doggo park iz beter than goin on a hike.</label>
          <select class="form-control" id="answer10">
            <option>Pikk an answer </option>
            <option value = "1">1 (hekk no!)</option>
            <option value = "2">2</option>
            <option value = "3">3</option>
            <option value = "4">4</option>
            <option value = "5">5 (hekk yes!) </option>
          </select>
        </div>
      </form>
      <button type="button" class="btn btn-primary" id="submit">
        Find me a new fren!
      </button>
    </div>

	<div id="results" class="modal fade" role="dialog">
	  <div class="modal-dialog">

	    
	    <div class="modal-content">
	      <div class="modal-header">
          <h2 class="modal-title"><strong>Best Match</strong></h2>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
	      </div>
	      <div class="modal-body">
	        <h2 id="nameOfDog"></h2>
	        <img id="photoOfDog" src="" alt="">
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal" id = "close">Close</button>
	      </div>
	    </div>

	  </div>
	</div>

  <!-- SCRIPTS -->
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <script type="text/javascript">
      

      // ON CLICK FOR SUBMIT BUTTON 
      // this captures the data from the fields, constructs an object, and sends it to the server, and takes back the match.
      $("#submit").on("click", function() {
        // alert("hi");
        
        var dogObject = {
          // HARDCODED VALUES TO TEST SUBMIT WORKS AND SENDS TO API 
          // name: "Tank",
          // photo:
          //   "https://images.squarespace-cdn.com/content/v1/55a2bffae4b037baec79f96e/1522585429159-Y9PILDV0QNVLP94B5ZMW/ke17ZwdGBToddI8pDm48kGDpvalPb1SqHoCn1hwN0Y57gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z5QHyNOqBUUEtDDsRWrJLTmQPoRzxSr1hzN-vPBHt7YyLLXgctAyUJRqJUUGWVDK_ZzIgvsybGcZEPqUYiXY8im/Norbert+colorful+tie.jpg",
          // scores: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
          name: $("#name").val(),
          photo: $("#pic").val(),
          scores: [
            $("#answer1").val(),
            $("#answer2").val(),
            $("#answer3").val(),
            $("#answer4").val(),
            $("#answer5").val(),
            $("#answer6").val(),
            $("#answer7").val(),
            $("#answer8").val(),
            $("#answer9").val(),
            $("#answer10").val()
          ]
        };

        // posts the data and takes the response, parses it, and then on success, clears the form fields 
        // and displays a modal with the matching dog 
        $.ajax({
          type: "POST",
          url: "/api/friends",
          data: dogObject, 
          datatype:"JSON", 
          success: function(res) {  
            $("#results").modal("show");
            $("#form1")[0].reset();  
            $("#form2")[0].reset();
          }
        })
        .then(function(data, status) {

          // alert(match + " " + status);  
          console.log ("-------data--------"); 
          console.log (data);
          console.log (data.name);
          console.log (data.photo);  
          console.log ("-------data--------"); 
          $("#nameOfDog").text(data.name); 
          $("#photoOfDog").attr("src", data.photo); 
          
        });
      });

      
      
    </script>

<footer class = "footer">
    <div class = "container">
        <p></p>
        <hr>
        <p></p>
        <p>
            <a href = "api/friends"> Friends List </a> | 
            <a href = "https://github.com/kalargent/pup-friend-finder"> GIT Repo</a>
        </p>
    </div>
</footer>
  </body>
</html>
